<!DOCTYPE html>
<html lang="en">
<head>
	<title></title>
	<meta charset="utf-8">
	<style type="text/css">
		html, body {height:100%; margin:0;}
		#container {height:100%; overflow:hidden; position:relative; width:100%;}
		.block {background-color:#AAA; border:1px solid #000; font-size:20px; opacity:1; position:absolute; text-align:center;}
		.block.active1 {background-color:#9F9;}
		.block.active2 {opacity:0.5;}
		.block.highlight {border-color:#F00;}
	</style>
</head>
<body>
	<div id="container"></div>

	<script src="lib/jquery-1.4.2.js"></script>
	<script src="lib/jquery.ba-each2.min.js"></script>
	<script src="jquery.nearest.js"></script>
	<script>
		$(function () {
			function rand(min, max) {
				return Math.round(Math.random() * max + min);
			}

			// Setup random elements
			var elemCount = 10,
				minSize = 25,
				maxSize = 150,
				$container = $('#container'),
				contWidth = $container.width(),
				contHeight = $container.height(),
				size, radius, x, y, $blocks;
			while (elemCount--) {
				size = rand(minSize, maxSize);
				x = rand(0, contWidth - size);
				y = rand(0, contHeight - size);
				radius = rand(0, size / 2);
				$('<div class="block" />').css({
					width: size,
					height: size,
					left: x,
					top: y/*,
					WebkitBorderRadius: radius,
					MozBorderRadius: radius,
					borderRadius: radius*/
				}).appendTo($container);
			}
			$blocks = $('.block');

			// Demo for $.nearest
			$(document).mousemove(function (e) {
				var x = e.pageX,
					y = e.pageY,
					point = {x: x, y: y};
				$blocks.removeClass('active1 active2').nearest(point).addClass('active1');
				$.nearest(point, $blocks).addClass('active2');
			});

			// Demo for $.fn.nearest
			$blocks.click(function () {
				var $this = $(this);
				$blocks.not($this).removeClass('highlight').text('');
				$this.addClass('highlight').text('CLICKED');
				$this.nearest($blocks.not($this)).addClass('highlight').text('nearest');
			});
		});
	</script>
</body>
</html>
